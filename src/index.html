<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Sight Reading Practice</title>
    </head>
    <body>
        <h1>Sight Reading Practice</h1>
        <p>
            A basic tool to help practice simple sight reading of pitches. 
            Reads input from a midi controller and updates each bar as it has been played.
        </p>
        <p>
            Uses <a href='http://www.vexflow.com/'>VexFlow</a> to generate the score and <a href='https://github.com/djipco/webmidi'>WebMidi.js</a> to handle midi input.
            Will probably only work in Chrome as most other browsers don't support Web Midi.
        </p>
        <p>
            Early testing of using <a href='http://p5js.org/'>p5.js</a> and <a href='https://ml5js.org/'>ml5</a> 
            with the <a href='https://github.com/marl/crepe'>Crepe pitch tracker</a> for pitch detection and audio comparison.
        </p>
        <div class='flex-container'>
            <form id='srt-notedetect'>
                <fieldset>
                    <legend>Note Detection Settings</legend>
                    <p>
                        <input type='radio' name='input-mode' id='srt-input-midi' value='midi' checked>
                        <label for='srt-input-midi'>MIDI</label>
                    </p>
                    <p>
                        <input type='radio' name='input-mode' id='srt-input-audio' value='audio'>
                        <label for='srt-input-audio'>Audio input (Pre-Pre-Alpha)</label>
                    </p>
                    <p>
                        <label for='srt-transposition'>Transposition (semitones):</label>
                        <input id='srt-transposition' type='number' name='transpose' min='-36' max=36 value='0' step='1'>
                    </p>
                    <p>
                        <label for='srt-noisefloor'>Noise Floor:</label>
                        <input id='srt-noisefloor' type='number' name='noisefloor' min='0' max='10000' step="1">
                    </p>
                    <p>
                        <label for='srt-minamplitude'>Detection Threshold:</label>
                        <input id='srt-minamplitude' type='number' name='minamplitude' min='0' max='10000' step="1">
                    </p>
                    <p>
                        <label for='srt-confidencelevel'>Model Confidence:</label>
                        <input id='srt-confidencelevel' type='number' name='confidence' min='0' max='100' step="0.5"></p>
                    <p>
                        <input id='srt-applydetection' type='button' value='Apply'>
                    </p>
                </fieldset>
            </form>
            <form id='srt-musicgen'>
                <fieldset>
                    <legend>Music Generator Settings</legend>
                    <p>
                        <label for='srt-clef'>Clef:</label>
                        <select id='srt-clef'></select>
                    </p>
                    <p>
                        <label for='srt-key-list'>Key:</label>
                        <select id='srt-key-list'></select>
                    </p>
                    <p>
                        <label for='srt-accidentals'>Accidental Chance:</label>
                        <input id='srt-accidentals' type='number' name='accidentals' min='0' max='1' value='0.1' step='0.01'>
                    </p>
                    <p>
                        <label for='srt-lowestnote'>Lowest Note:</label>
                        <select id='srt-lowestnote'></select>
                    </p>
                    <p>
                        <label for='srt-highestnote'>Highest Note:</label>
                        <select id='srt-highestnote'></select>
                    </p>
                    <p>
                        <input id='srt-regenerate' type='button' value='Regenerate Music'>
                    </p>
                </fieldset>
            </form>
        </div>
        <noscript>Javascript is required for this application.</noscript>
        <div id='srt-render'></div>
        <div id='controls'>
            <button id='correct-note'>Simulate correct note</button>
            <button id='wrong-note'>Simulate incorrect note</button>
        </div>
    </body>
</html>