<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sight Reading Practice</title>
</head>
<body>
<div class="container">
  <div class="jumbotron text-center">
    <h1>Sight Reading Practice</h1>
  </div>
  <div class="row">
    <div class="col">
      <p><a href="https://github.com/DavidCEllis/SightreadingPractice">Source code available on
        GitHub</a></p>
      <p>
        A basic tool to help practice simple sight reading of pitches.
        Reads input from a midi controller and updates each bar as it has been played.
      </p>
      <p>
        Uses <a href="http://www.vexflow.com/">VexFlow</a> to generate the score and
        <a href="https://github.com/djipco/webmidi">WebMidi.js</a> to handle midi input.
        Will probably only work in Chrome as most other browsers don't support Web Midi.
      </p>
      <p>
        Early testing of using <a href="http://p5js.org/">p5.js</a> and <a
          href="https://ml5js.org/">ml5</a>
        with the <a href="https://github.com/marl/crepe">Crepe pitch tracker</a> for pitch detection
        and audio comparison.
      </p>
      <p>
        Transposition in pitch detection indicates how many semitones an input pitch needs to be
        shifted by to match the score (eg: for guitar this should be +12).
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <form id="srt-notedetect">
        <legend>Note Detection Settings</legend>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="input-mode" id="srt-input-midi" value="midi">
          <label for="srt-input-midi">MIDI</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="input-mode" id="srt-input-audio" value="audio">
          <label for="srt-input-audio">Audio input (early testing)</label>
        </div>
        <br/>
        <div class="form-group">
          <label for="srt-transposition">Transposition (semitones):</label>
          <input class="form-control" id="srt-transposition" type="number" name="transpose"
                 min="-36" max="36" value="0" step="1">
        </div>
        <div class="form-group">
          <label for="srt-noisefloor">Noise Floor:</label>
          <input class="form-control" id="srt-noisefloor" type="number" name="noisefloor"
                 min="0" max="10000" step="1">
        </div>
        <div class="form-group">
          <label for="srt-minamplitude">Detection Threshold:</label>
          <input class="form-control" id="srt-minamplitude" type="number" name="minamplitude"
                 min="0" max="10000" step="1">
        </div>
        <div class="form-group">
          <label for="srt-confidencelevel">Model Confidence:</label>
          <input class="form-control" id="srt-confidencelevel" type="number" name="confidence"
                 min="0" max="100" step="0.5">
        </div>
        <div class="form-group">
          <input class="btn btn-primary" id="srt-applydetection" type="button" value="Apply">
        </div>
      </form>
    </div>
    <div class="col">
      <form id="srt-musicgen">
        <legend>Music Generator Settings</legend>
        <div class="form-group">
          <label for="srt-clef">Clef:</label>
          <select class="form-control" id="srt-clef"></select>
        </div>
        <div class="form-group">
          <label for="srt-key-list">Key:</label>
          <select class="form-control" id="srt-key-list"></select>
        </div>
        <div class="form-group">
          <label for="srt-accidentals">Accidental Chance:</label>
          <input class="form-control" id="srt-accidentals" type="number" name="accidentals"
                 min="0" max="1" value="0.1" step="0.01">
        </div>
        <div class="form-group">
          <label for="srt-lowestnote">Lowest Note:</label>
          <select class="form-control" id="srt-lowestnote"></select>
        </div>
        <div class="form-group">
          <label for="srt-highestnote">Highest Note:</label>
          <select class="form-control" id="srt-highestnote"></select>
        </div>
        <div class="form-group">
          <input class="btn btn-primary" id="srt-regenerate" type="button" value="Regenerate Music">
        </div>

      </form>
    </div>
  </div>
  <noscript>Javascript is required for this application.</noscript>
  <div class="row" id="srt-audiostats"></div>
  <div class="row" id="srt-render"></div>
  <div class="row" id="controls">
    <div class="btn-group" role="group">
      <button class="btn btn-secondary" id="correct-note">Simulate correct note</button>
      <button class="btn btn-secondary" id="wrong-note">Simulate incorrect note</button>
    </div>
  </div>
</div>
<br/>
<div class="jumbotron text-center" style="margin-bottom:0">
  <p></p>
</div>
</body>
</html>
